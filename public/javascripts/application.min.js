$(document).ready(function(){$(".icon-leaf").toggle();$("#results").toggle();$("#loading-bar").toggle();$("#err-modal").toggle();$("#info-modal").toggle();$("#search-button").fadeTo(1,0.5);$("#search-button").hover(function(){$(this).fadeTo(1,1)});$(".hero-unit").hover(function(){$("#search-button").fadeTo(1,0.5)});var b;$(document).keypress(function(c){if(c.which==13&&$("#search-input").is(":focus")){$("#search-button").click()}});if(!is_auth){$("#search-button").click(function(){$.cookie("pre-name",$("#search-input").val());location.href="/auth/twitter"})}else{if($.cookie("pre-name")!==undefined){$("#search-input").val($.cookie("pre-name"));$.removeCookie("pre-name");a($("#search-input").val())}$("#search-button").click(function(){a($("#search-input").val())})}function a(c){if(b){b.abort()}b=$.ajax({url:"/unfollowers",type:"post",data:{name:$("#search-input").val()}});$("#loading-bar").show();$(".icon-refresh").show();$(".icon-leaf").hide();b.done(function(f,h,e){$("#err-modal").hide();$("#info-modal").hide();$("#results").hide();if(f.msg){$("#err-msg").html(f.msg);$("#err-modal").show();return}if(f.length==0){$("#info-msg").html("<strong>Yay!</strong> Everyone follows you back.");$("#info-modal").show();return}for(var d=0;d<f.length;d++){var g=f[d];$("#tbl-results").find("tbody").append($("<tr>").append($("<td>").append($("<img>").attr("src",g.avatar).addClass("img-rounded")).addClass("img-td").css("text-align","center")).append($("<td>").append($("<span>").html("@"+g.screen_name).addClass("twuser")).append($("<small>").html(g.name).addClass("twname"))).append($("<td>").append($("<a>").addClass("unfollow btn btn-large btn-primary").text("unfollow").attr("href","http://twitter.com/"+g.screen_name).attr("target","_blank"))))}$("#results").slideDown(300)});b.fail(function(d,f,e){$("#err-modal").hide();$("#info-modal").hide();$("#results").hide();$("#err-msg").html("<strong>Oops!</strong> Something went wrong, sorry about that.");$("#err-modal").show()});b.always(function(){$(".icon-leaf").show();$(".icon-refresh").hide()})}});